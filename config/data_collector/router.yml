services:
    controller.resolver:
        class: Symfony\Component\HttpKernel\Controller\TraceableControllerResolver
        arguments:
            - @nicofuma.webprofiler.controller.resolver_real
            - @nicofuma.webprofiler.stopwatch

    nicofuma.webprofiler.controller.resolver_real:
        class: phpbb\controller\resolver
        arguments:
            - @user
            - @service_container
            - %core.root_path%
            - @template
        public: false

    nicofuma.webprofiler.url_matcher:
        class: nicofuma\webprofiler\phpbb\routing\url_matcher
        arguments:
            - @symfony_request
            - @ext.manager
            - %core.root_path%
            - %core.php_ext%

    nicofuma.webprofiler.profiler.data_collector.router:
        class: Symfony\Component\HttpKernel\DataCollector\RouterDataCollector
        tags:
            - { name: profiler.data_collector }
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
